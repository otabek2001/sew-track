{% if tasks %}
    {% for record in tasks %}
    <a 
        href="{% url 'tasks:work_record_detail' record.id %}"
        class="block p-4 hover:bg-gray-50 transition touch-feedback"
    >
        <div class="flex items-start justify-between">
            <div class="flex-1">
                <h3 class="font-medium text-gray-800">{{ record.product.name }}</h3>
                <p class="text-sm text-gray-500 mt-1">
                    {{ record.task.name_uz }} • {{ record.quantity }} dona
                </p>
                <div class="flex items-center gap-2 mt-2">
                    <span class="
                        inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium
                        {% if record.status == 'approved' %}
                            bg-blue-100 text-blue-700
                        {% elif record.status == 'completed' %}
                            bg-green-100 text-green-700
                        {% elif record.status == 'pending' %}
                            bg-yellow-100 text-yellow-700
                        {% else %}
                            bg-red-100 text-red-700
                        {% endif %}
                    ">
                        <i data-lucide="{% if record.status == 'approved' %}check-circle{% elif record.status == 'completed' %}check{% elif record.status == 'pending' %}clock{% else %}x-circle{% endif %}" class="w-3 h-3"></i>
                        {{ record.get_status_display }}
                    </span>
                    <span class="text-xs text-gray-400">
                        {{ record.created_at|timesince }} oldin
                    </span>
                </div>
            </div>
            <div class="text-right ml-4">
                <p class="text-lg font-bold text-blue-600">{{ record.total_payment|floatformat:0 }}</p>
                <p class="text-xs text-gray-500">so'm</p>
            </div>
        </div>
    </a>
    {% endfor %}
{% else %}
    <div class="p-8 text-center text-gray-500">
        <i data-lucide="inbox" class="w-12 h-12 mx-auto mb-2 opacity-50"></i>
        <p>Hali ishlar yo'q</p>
        <a 
            href="{% url 'tasks:work_record_create' %}"
            class="inline-block mt-4 text-blue-600 font-medium hover:underline"
        >
            Birinchi ishni yarating →
        </a>
    </div>
{% endif %}

<script>
    // Reinitialize Lucide icons for dynamically loaded content
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>

